<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Movie Player</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #000;
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    #loader {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
      font-size: 30px;
    }
    #videoContainer {
      margin-top: 60px;
    }
    video {
      width: 90%;
      max-width: 900px;
      border: 5px solid #555;
      border-radius: 10px;
      background: #000;
    }
  </style>
</head>
<body>

<div id="loader">Loading...</div>

<h1 id="movieTitle"></h1>

<div id="videoContainer">
  <video id="moviePlayer" controls autoplay>
    <track id="subtitleTrack" kind="subtitles" srclang="en" label="English">
    Your browser does not support HTML5 video.
  </video>
</div>

<script>
// Hide loader once video metadata is loaded
document.getElementById('moviePlayer').addEventListener('loadeddata', () => {
  document.getElementById('loader').style.display = 'none';
});

// Parse parameters
const params = new URLSearchParams(window.location.search);
const title = params.get('title');
const year = params.get('year');
const videoUrl = params.get('video');

// Update title
document.getElementById('movieTitle').textContent = `${title.replaceAll('%20', ' ')} (${year})`;

// Update video source
const video = document.getElementById('moviePlayer');
const source = document.createElement('source');
source.src = videoUrl;
source.type = 'application/x-mpegURL'; // assuming HLS streams
video.appendChild(source);
video.load();

// Optional subtitles if available
const track = document.getElementById('subtitleTrack');
track.src = `subtitles/${title}.vtt`; // must match title
</script>

</body>
</html>
